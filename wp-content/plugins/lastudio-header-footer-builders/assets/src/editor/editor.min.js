window.onload=function(){document.body.style.display="block"},function(a){"use strict";a(document).ready(function(){function e(e,a,l){var t=new RegExp("([?&])"+a+"=.*?(&|$)","i"),n=-1===e.indexOf("?")?"?":"&";return e.match(t)?e.replace(t,"$1"+a+"="+l+"$2"):e+n+a+"="+l}a(document).on("keyup",".lastudio-icons-list-wrapper .la-icon-wrap-search",function(){var e=a(this).val(),l=a(this).next(".lastudio-icons-list").find(".la-icon-wrap");l.each(function(){var l=a(this);0>l.data("name").search(new RegExp(e,"i"))?l.hide():l.show()})}),a(window).on("load",function(){function l(){}function t(e){try{JSON.parse(e)}catch(a){return!1}return!0}function n(e){return e===Object(e)}function d(){return!!u.hasClass("lastudio-frontend-builder-wrap")}function i(e,t,n){let d=e.attr("data-element"),i=e.attr("data-unique-id"),f=i;y.hasOwnProperty(f)||(y[f]={}),0<!v.children(".lahfb-spinner-wrap").length&&v.prepend("<div class=\"lahfb-spinner-wrap\"><div class=\"lahfb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"get_component_field",nonce:lahfb_localize.nonce,el_name:d},success:function(l){0<v.children(".lahfb-spinner-wrap").length&&v.children(".lahfb-spinner-wrap").remove(),a(".lastudio-backend-header-builder-wrap").append(l),m=v.find(".lahfb-modal-wrap[data-element-target=\""+d+"\"]"),m.find(".lahfb-tabs-list").find("li").removeClass("w-active"),m.find(".lahfb-tab-panel").hide(),m.find(".lahfb-tabs-list").find("li:first").addClass("w-active"),m.find(".lahfb-modal-contents").children(".lahfb-tab-panel:first").show();var h=m.find(".lahfb-modal-contents").children(".lahfb-tab-panel");if("desktop-view"==t?h.find(".lahfb-tab-panel[data-id=\"#all\"]").show():"tablets-view"==t?h.find(".lahfb-tab-panel[data-id=\"#tablets\"]").show():"mobiles-view"==t?h.find(".lahfb-tab-panel[data-id=\"#mobiles\"]").show():"sticky-view"==t&&h.find(".lahfb-tab-panel[data-id=\"#all\"]").show(),h.find(".lahfb-tab-panel").find(".lahfb-tab-panel:first").show(),m.show(),m.find(".lahfb-field").each(function(){let e=a(this),l=e.find(".lahfb-field-input"),t=l.data("field-name"),n=l.data("field-std");n="undefined"==typeof n?"":n,"undefined"==typeof y[f][t]?(l.val(n),n&&(y[f][t]=n)):l.val(y[f][t])}),n){let a=e.find("a").find("i").attr("class");if("sticky-view"==t)_[t][D][x].push({name:d,uniqueId:i,hidden_element:!1,editor_icon:a});else for(var c in C)_[c][D][x].push({name:d,uniqueId:i,hidden_element:!1,editor_icon:a})}if(r(),m.find(".lahfb-dependency").on("change",function(){s(a(this))}),m.find(".lahfb-dependency").trigger("change"),n){var b=e[0].outerHTML;a(".lahfb-elements-item[data-element=\""+d+"\"][data-unique-id=\""+i+"\"]").each(function(){a(this).replaceWith(b)})}o(m[0])}}),l()}function s(e){let l=e.data("dependency"),t=e.find(".lahfb-field-input").val();a.each(l,function(e,l){for(let n=0;n<l.length;n++){let d=m.find(".lahfb-field-input[data-field-name=\""+l[n]+"\"]").closest(".lahfb-field").hide(),i="lahfb-field w-col-sm-12 lahfb-dependency"==d.attr("class");e==t?(d.show(),i&&s(d)):i&&a.each(d.data("dependency"),function(e,a){for(let l=0;l<a.length;l++)m.find(".lahfb-field-input[data-field-name=\""+a[l]+"\"]").closest(".lahfb-field").hide()})}})}function r(){let e=a(".lahfb-modal-wrap");e.find(".lahfb-switcher").find(".lahfb-field-input").on("change",function(){let e=a(this);e.is(":checked")?(e.val("true"),e.prop("checked",!0)):(e.val("false"),e.prop("checked",!1))}),e.find(".lahfb-attach-image").each(function(){let e,l=a(this),t=l.find(".lahfb-add-image"),n=l.find(".lahfb-remove-image"),d=l.find(".lahfb-preview-image");t.on("click",function(a){a.preventDefault();let t=l.find("input.lahfb-attach-image"),i=t.val();return i=i?i:"",e?void e.open():void(e=wp.media({multiple:!1}),e.on("select",function(){let a=e.state().get("selection").first().toJSON();d.html("").append("<img src=\""+a.url+"\" alt=\"\">").css("display","block"),t.val(a.id),n.show()}),e.open())}),n.on("click",function(e){e.preventDefault();let a=l.find("input.lahfb-attach-image");d.html("").hide(),n.hide(),a.val("")})}),e.find(".lahfb-number-unit").each(function(){let e=a(this),l=e.find("input[type=\"number\"]"),t=e.find(".lahfb-opts").children("span"),n=e.find(".lahfb-field-input");t.on("click",function(e){e.preventDefault();let d=a(this),i=d.data("value"),s=l.val();t.removeClass("lahfb-active"),d.addClass("lahfb-active"),s&&n.val(s+i)}),l.on("change",function(t){t.preventDefault();let d=a(this),i=e.find(".lahfb-opts").children("span.lahfb-active").data("value"),s=l.val();s?n.val(s+i):n.val("")})}),e.find(".lahfb-custom-select").find(".lahfb-opts").find("span").on("click",function(){let e=a(this),l=e.closest(".lahfb-custom-select"),t=l.find(".lahfb-opts").children("span"),n=l.find(".lahfb-field-input"),d=e.data("value");t.removeClass("lahfb-active"),e.addClass("lahfb-active"),n.val(d)}),e.find(".lahfb-field-icons-wrap").each(function(){let e=a(this),l=e.find(".la-icon-wrap").find("label"),t=e.find(".lahfb-field-input");l.on("click",function(e){e.preventDefault();let n=a(this),d=n.attr("for");l.removeClass("lahfb-active"),n.addClass("lahfb-active"),t.val(a("#"+d).val())})}),e.find(".lahfb-color-picker").wpColorPicker(),e.find(".lahfb-field").find(".lahfb-field-input").each(function(){let e=a(this);if(e.hasClass("lahfb-switcher-field")&&("true"==e.val()?e.prop("checked",!0):e.prop("checked",!1)),e.hasClass("lahfb-field-custom-select")&&e.siblings(".lahfb-opts").find("span").each(function(){let l=a(this);l.removeClass("lahfb-active"),l.data("value")==e.val()&&l.addClass("lahfb-active")}),e.hasClass("lahfb-field-number-unit")){let l=e.val();if(l){let t=e.closest(".lahfb-number-unit"),n=t.find("input[type=\"number\"]"),d=t.find(".lahfb-opts").children("span"),i=parseFloat(l),s=l.split(i)[1];n.val(i),d.each(function(){let e=a(this),l=e.data("value");e.removeClass("lahfb-active"),l==s&&e.addClass("lahfb-active")})}else e.closest(".lahfb-number-unit").find("input[type=\"number\"]").val("")}if(e.hasClass("lahfb-icon-field")){let a=e.val(),l=e.closest(".lahfb-field-icons-wrap"),t=l.find(".la-icon-wrap").find("label"),n=l.find(".lastudio-icons-list");a?(t.removeClass("lahfb-active"),l.find(".la-icon-wrap input[value=\""+a+"\"]").next("label").addClass("lahfb-active"),l.find(".la-icon-wrap input[value=\""+a+"\"]").closest(".la-icon-wrap").prependTo(n)):t.removeClass("lahfb-active")}if(e.hasClass("lahfb-attach-image")){let a=e.val(),l=e.siblings(".lahfb-remove-image"),t=e.siblings(".lahfb-preview-image");if(a&&!wp.media.attachment(a).destroyed){0<!m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length&&m.find(".lahfb-modal-contents").prepend("<div class=\"lahfb-spinner-wrap\"><div class=\"lahfb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>");try{wp.media.attachment(a).fetch().done(function(){0<m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length&&m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").remove(),t.html("").append("<img src=\""+this.attributes.url+"\" alt=\"\">").css("display","block"),l.show()}).fail(function(){0<m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length&&m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").remove(),t.html("").hide(),l.hide(),e.val("")})}catch(a){0<m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length&&m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").remove(),t.html("").hide(),l.hide(),e.val("")}}else 0<m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").length&&m.find(".lahfb-modal-contents").find(".lahfb-spinner-wrap").remove(),t.html("").hide(),l.hide()}})}function o(a){function l(a){a=a||window.event,s=a.clientX,r=a.clientY,document.onmouseup=n,document.onmousemove=t}function t(l){l=l||window.event,d=s-l.clientX,i=r-l.clientY,s=l.clientX,r=l.clientY,a.style.top=a.offsetTop-i+"px",a.style.left=a.offsetLeft-d+"px"}function n(){document.onmouseup=null,document.onmousemove=null}if("undefined"==typeof a)return;let d=0,i=0,s=0,r=0;a.getElementsByClassName("lahfb-modal-header")?a.getElementsByClassName("lahfb-modal-header")[0].onmousedown=l:a.onmousedown=l}function f(){let e,l,t,n=a("#LaStudo_Iframe");n.length&&(t=document.getElementById("LaStudo_Iframe").contentWindow.jQuery,e=t("#lastudio-header-builder"),0==e.children(".lahfb-spinner-wrap").length&&e.prepend("<div class=\"lahfb-spinner-wrap\"><div class=\"lahfb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>")),l=a(".lahfb_save"),l.length&&l.val(lahfb_localize.i18n.saved_text),a.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"save_header_data",nonce:lahfb_localize.nonce,headerPreset:lahfb_localize.prebuild_header_key,frontendComponents:JSON.stringify(k)},success:function(i){if(d()){var s=a(i),r=s[0],o=s[1];t("#lahfb-frontend-styles-inline-css").replaceWith(o),e.replaceWith(r);let d=k["desktop-view"].row1.settings,f=d.header_type,h="undefined"==typeof d.vertical_toggle?"false":d.vertical_toggle;"vertical"==f?(t("body").addClass("header-type-vertical"),"true"==h?t("body").removeClass("header-type-vertical--default").addClass("header-type-vertical--toggle"):t("body").removeClass("header-type-vertical--toggle").addClass("header-type-vertical--default")):t("body").removeClass("header-type-vertical header-type-vertical--toggle header-type-vertical--default"),n.length&&document.getElementById("LaStudo_Iframe").contentWindow.LAHFB.core.reloadAllEvents(),l.val(lahfb_localize.i18n.save_text),e.children(".lahfb-spinner-wrap").remove()}},complete:function(){}}).done(function(){q&&a("#lahfb-publish").trigger("click")})}function h(){for(let e in k=a.extend(!0,{},_),k)for(let a in k[e])for(let l in k[e][a]){let t=k[e][a][l];if("settings"==l||"left_settings"==l||"center_settings"==l||"right_settings"==l){let e=t.uniqueId;for(const a in e in y&&Object.assign(t,y[e]),t)if(t.hasOwnProperty(a)){const e=t[a];"hidden_element"!=a&&"boolean"==typeof e&&(t[a]=e+"")}}else if(0!=t.length)for(let e of t){let a=e.uniqueId;for(const l in a in y&&Object.assign(e,y[a]),e)if(e.hasOwnProperty(l)){const a=e[l];"hidden_element"!=l&&"boolean"==typeof a&&(e[l]=a+"")}}}k["desktop-view"].row1.settings.element=_["desktop-view"].row1.settings.element,k["desktop-view"].row1.settings.header_type=_["desktop-view"].row1.settings.header_type}function c(e){b(e.target.result)}function b(e){e&&(t(e)||n(e))?(u.css({height:"1px",overflow:"hidden"}).prepend("<div class=\"lahfb-spinner-wrap\"><div class=\"lahfb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),a("#wpwrap").css("display","none"),e=t(e)?JSON.parse(e):e,y=e.lahfb_data_components,_=e.lahfb_data_editor_components,k=e.lahfb_data_frontend_components,q=!0,f()):alert("Header import input is empty! That's why no data can import.")}let p,m,u=a("body"),v=a("#lastudio-backend-header-builder"),w=v.find(".lahfb-elements-place"),g=v.find(".lahfb-desktop-panel").find(".lahfb-columns[data-columns=\"row1\"]").find(".lahfb-elements-place"),y=lahfb_localize.components?lahfb_localize.components:{},_=lahfb_localize.editor_components?lahfb_localize.editor_components:{},k=lahfb_localize.frontend_components?lahfb_localize.frontend_components:{};const C={"desktop-view":{},"tablets-view":{},"mobiles-view":{}};let x,D,I,S,q=!1;for(let e in u.removeClass("admin-bar"),l(),y)if(y.hasOwnProperty(e)){const l=y[e];if(-1!=e.search("logo")){let t=e.slice("5");v.find(".lahfb-elements-item[data-element=\"logo\"][data-unique-id=\""+t+"\"]").each(function(){let e=a(this);wp.media.attachment(l.logo).fetch().done(function(){e.children("a").hide().after("<img class=\"lahfb-img-placeholder-el\" src=\""+this.attributes.url+"\" alt=\"\">")})})}}if(v.on("click","#lahfb-cleardata",function(t){if(t.preventDefault(),confirm(lahfb_localize.i18n.clear_data_text)){let e=a.extend(!0,{},lahfb_localize.default_data.editor_components);y={},_=e,k=lahfb_localize.default_data.frontend_components,v.find(".lahfb-col .lahfb-elements-item").remove(),v.find("[data-unique-id]").map(function(){a(this).attr("data-unique-id",lahfb_localize.default_data.uniqid+a(this).attr("data-unique-id").substr(13))}),f(),l()}}),a("#LaStudo_Iframe").css("height",window.innerHeight-48),a(".lahfb-frontend-builder").niceScroll({cursorborder:"0",background:"#e7e7e7",cursorcolor:"#91989e"}),v.find(".lahfb-tab-panel"+v.find(".lahfb-tabs-list").find("li.w-active").find("a").attr("href")).show(),v.on("click",".lahfb-tabs-list a",function(e){e.preventDefault();let l=a(this),t=l.parent(),n=l.closest("ul").find("li"),d=l.closest("ul");t.hasClass("w-active")||(n.removeClass("w-active"),t.addClass("w-active"),d.hasClass("lahfb-element-groups")?v.find(".lahfb-group-panel").hide().end().find(".lahfb-group-panel[data-id=\""+l.attr("href")+"\"]").show():d.hasClass("lahfb-styling-groups")?d.siblings(".lahfb-styling-group-panel").hide().end().siblings(".lahfb-styling-group-panel[data-id=\""+l.attr("href")+"\"]").show():d.hasClass("lahfb-styling-screens")?v.find(".lahfb-styling-screen-panel").hide().end().find(".lahfb-styling-screen-panel[data-id=\""+l.attr("href")+"\"]").show():v.find(".lahfb-tab-panel:not(.lahfb-group-panel)").hide().end().find(".lahfb-tab-panel"+l.attr("href")).fadeIn(300))}),a("#lahfb-desktop-tab, #lahfb-sticky-tab").on("click",function(l){l.preventDefault(),u.removeClass("lahfb-tablets-device lahfb-mobiles-device"),a(".lahfb-screen-view").hide(),a(".lahfb-desktop-view, .lahfb-sticky-view").show()}),a("#lahfb-tablets-tab").on("click",function(l){l.preventDefault(),u.removeClass("lahfb-mobiles-device"),u.addClass("lahfb-tablets-device"),a(".lahfb-screen-view").hide(),a(".lahfb-tablets-view").show()}),a("#lahfb-mobiles-tab").on("click",function(l){l.preventDefault(),u.removeClass("lahfb-tablets-device"),u.addClass("lahfb-mobiles-device"),a(".lahfb-screen-view").hide(),a(".lahfb-mobiles-view").show()}),v.find(".lahfb-full-modal-btn").on("click",function(e){e.preventDefault();let l=a(this),t=l.data("modal-target"),n=v.find(".lahfb-full-modal[data-modal=\""+t+"\"]");u.css("overflow","hidden"),n.find("textarea").val(" "),n.fadeIn(200)}),v.find(".lahfb-full-modal-close").on("click",function(e){e.preventDefault(),u.css("overflow","initial"),v.find(".lahfb-full-modal").hide()}),v.on("click",".w-add-element",function(e){e.preventDefault();let l=a(this);v.find(".lahfb-elements").show(),I=l.closest(".lahfb-tab-panel").attr("id"),D=l.closest(".lahfb-columns").attr("data-columns"),x=l.attr("data-align-col")}),v.on("click",".lahfb-modal-header i, .lahfb_close",function(e){e.preventDefault();try{v.find(".lahfb-color-picker").data("wpWpColorPicker").close()}catch(a){}v.find(".lahfb-modal-wrap").hide(),v.find(".lahfb-modal-wrap[data-element-target]").remove()}),v.find(".lahfb-modal-wrap").on("click",".lahfb-elements-item a",function(e){e.preventDefault();let l=a(this),t=new Date().valueOf(),n=a(this).find("i").attr("class"),d=`<span class="lahfb-controls"><span class="lahfb-tooltip tooltip-on-top" data-tooltip="Copy to Clipboard"><i class="lahfb-control lahfb-copy-btn fa fa-clipboard"></i></span><span class="lahfb-tooltip tooltip-on-top" data-tooltip="Settings"><i class="lahfb-control lahfb-edit-btn fa fa-pencil-square-o"></i></span><span class="lahfb-tooltip tooltip-on-top" data-tooltip="Hide"><i class="lahfb-control lahfb-hide-btn fa fa-eye"></i></span><span class="lahfb-tooltip tooltip-on-top" data-tooltip="Remove"><i class="lahfb-control lahfb-delete-btn fa fa-times"></i></span></span>`;if(l.closest(".lahfb-elements-item").hasClass("lahfb-clipboard-item")){let e=l.parent(),n=e.data("unique-id").toString();for(const e in y)if(y.hasOwnProperty(e)){const l=a.extend(!0,{},y[e]);n==e&&(y[t]=l)}p=S.clone().removeClass("w-col-sm-4").attr({"data-unique-id":t}).prepend(d)}else p=l.parent().clone().removeClass("w-col-sm-4").attr({"data-unique-id":t,"data-hidden_element":!1,"data-editor_icon":n}).prepend(d);v.find(".lahfb-columns[data-columns=\""+D+"\"]").find(".lahfb-col.col-"+x).find(".lahfb-elements-place").append(p),v.find(".lahfb-modal-wrap").hide(),i(p,I,!0)}),v.on("click",".lahfb-copy-btn",function(e){e.preventDefault();let l=a(this).closest(".lahfb-elements-item").clone();S=l.clone(),a(".lahfb-clipboard-item").remove(),l.removeClass("ui-sortable-handle").addClass("w-col-sm-4 lahfb-clipboard-item"),l.children(".lahfb-controls").remove().end().children("img").remove(),l.children("a").css({display:"block","background-color":"#e3e3e3"}),l.find("i").removeClass("fa fa-circle-thin").addClass("fa fa-clipboard").css("color","#f60"),l.find(".lahfb-element-name").text("Paste (Clipboard)"),a(".lahfb-modal-wrap.lahfb-elements").find(".lahfb-modal-contents").prepend(l)}),v.on("click",".lahfb-delete-btn",function(e){if(e.preventDefault(),confirm("Press OK to delete element, Cancel to leave")){let e=a(this).closest(".lahfb-elements-item"),t=e.data("element"),n=e.data("unique-id").toString();if(I=e.closest(".lahfb-tab-panel").attr("id"),D=e.closest(".lahfb-columns").attr("data-columns"),x=e.closest(".lahfb-col").attr("data-align-col"),delete y[n],"sticky-view"==I){let e=_[I][D][x];for(let a=0;a<e.length;a++)e[a].uniqueId==n&&e.splice(a,1)}else for(let e in C){let a=_[e];(function(){for(let e in a){let l=a[e];for(let e in l){let a=l[e];for(let e=0;e<a.length;e++)if(a[e].uniqueId==n)return void a.splice(e,1)}}})()}h(),f(),l(),v.find(".lahfb-elements-item[data-element=\""+t+"\"][data-unique-id=\""+n+"\"]").remove()}}),v.on("click","#lahfb-saveastpl",function(l){l.preventDefault();let e=v.find(".lahfb-modal-save-header");m=e,e.show(),r(),e.find(".lahfb-dependency").on("change",function(){s(a(this))}),e.find(".lahfb-dependency").trigger("change")}),v.on("click",".lahfb_save_as_template",function(l){l.preventDefault();let t=v.find(".lahfb-modal-save-header"),n=t.find("select[data-field-name=\"lahfb_save_header_type\"]"),d=t.find("select[data-field-name=\"lahfb_save_header_type_existing\"]"),i=t.find("input[data-field-name=\"lahfb_save_header_type_new\"]"),s=t.find("input[data-field-name=\"lahfb_save_header_custom_image\"]");if("add_new"==n.val()&&""==i.val())return alert("Please enter the new header name !"),!1;if("update"==n.val()&&0==a("option",d).length)return alert("Sorry currently you haven't any data yet - please use Add New method"),!1;let r={action:"lahfb_ajax_action",router:"save_header_as_template",nonce:lahfb_localize.nonce,frontendComponents:JSON.stringify(k),header_name:"",header_key:"",header_image:""};""!=s.val()&&(r.header_image=s.val()),"add_new"==n.val()&&(r.header_name=i.val()),"update"==n.val()&&(r.header_name=a("option:selected",d).text(),r.header_key=d.val()),a.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:r,dataType:"json",success:function(l){if(l.success){let n="";for(let a in l.data){let t=l.data[a],d=e(window.location.href,"prebuild_header",a);n+="undefined"==typeof t.image?"<a class=\"lahfb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><span>"+t.name+"</span><i class=\"fa fa-remove\"></i></a>":"<a class=\"lahfb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><img src=\""+t.image+"\" alt=\""+t.name+"\"/><i class=\"fa fa-remove\"></i></a>"}a(".lahfb-predefined-modal-inner-content").html(n),alert("Saved successfully!"),t.hide()}else alert("Sorry, please try again!")}})}),v.on("click",".lahfb-edit-btn",function(e){e.preventDefault();let l=a(this);v.find(".lahfb-modal-wrap").hide(),v.find(".lahfb-modal-wrap[data-element-target]").remove(),p=l.closest(".lahfb-elements-item"),I=l.closest(".lahfb-tab-panel").attr("id"),i(p,I,!1)}),v.on("click",".w-edit-column",function(e){e.preventDefault();let l=a(this);v.find(".lahfb-modal-wrap").hide(),v.find(".lahfb-modal-wrap[data-element-target]").remove(),p=l,I=l.closest(".lahfb-tab-panel").attr("id"),i(p,I,!1)}),v.find(".lahfb-tabs-panels").find(".lahfb-columns").children(".lahfb-elements-item[data-hidden_element=\"true\"]").find("i.lahfb-hide-btn").removeClass("fa fa-eye").addClass("fa fa-eye-slash").closest(".lahfb-columns").addClass("lahfb-columns-hidden").css("opacity","0.45"),v.find(".lahfb-elements-place").find(".lahfb-elements-item[data-hidden_element=\"true\"]").find("i.lahfb-hide-btn").removeClass("fa fa-eye").addClass("fa fa-eye-slash"),v.on("click",".lahfb-hide-btn",function(e){e.preventDefault();let t,n=a(this),d=n.closest(".lahfb-elements-item"),i=d.data("element"),s=d.data("unique-id").toString();if(I=d.closest(".lahfb-tab-panel").attr("id"),D=d.closest(".lahfb-columns").attr("data-columns"),x=d.closest(".lahfb-col").attr("data-align-col"),"header-area"==i||"sticky-area"==i){let e=_[I][D].settings.hidden_element;_[I][D].settings.hidden_element=!e,t=!e,d.attr("data-hidden_element",!e).data("hidden_element",!e);let a=d.closest(".lahfb-columns");t?(n.removeClass("fa fa-eye").addClass("fa fa-eye-slash"),a.addClass("lahfb-columns-hidden").css("opacity","0.45")):(n.removeClass("fa fa-eye-slash").addClass("fa fa-eye"),a.removeClass("lahfb-columns-hidden").css("opacity","1"))}else{const e=_[I][D][x];for(let a,l=0;l<e.length;l++)if(a=e[l],a.uniqueId==s){a.hidden_element=!a.hidden_element,t=a.hidden_element,d.attr("data-hidden_element",a.hidden_element).data("hidden_element",a.hidden_element);break}t?(n.removeClass("fa fa-eye").addClass("fa fa-eye-slash"),d.find("a").css("color","#888"),d.addClass("lahfb-columns-hidden").css("opacity","0.45")):(n.removeClass("fa fa-eye-slash").addClass("fa fa-eye"),d.find("a").css("color","#0073aa"),d.removeClass("lahfb-columns-hidden").css("opacity","1"))}h(),f(),l()}),v.on("click",".lahfb_save",function(e){e.preventDefault();let t=a(this),n=p.data("element"),i=p.data("unique-id"),s=i;m.find(".lahfb-field").each(function(){let e=a(this),l=e.find(".lahfb-field-input"),t=l.data("field-name"),n=l.val();""==n?y[s].hasOwnProperty(t)&&(y[s][t]=n):null!=n&&("string"==typeof n&&-1!=n.indexOf("\"")&&(n=n.replace(/"/g,"'")),y[s][t]=n)}),h(),f(),l();let r=p[0].outerHTML,o=v.find(".lahfb-elements-item[data-element=\""+n+"\"][data-unique-id=\""+i+"\"]");o.each(function(){a(this).replaceWith(r)}),o=v.find(".lahfb-elements-item[data-element=\""+n+"\"][data-unique-id=\""+i+"\"]"),m.find(".lahfb-field.lahfb-placeholder").each(function(){let e=a(this);if(e.hasClass("lahfb-img-placeholder")){let a=e.find(".lahfb-field-input").val();a?wp.media.attachment(a).fetch().done(function(){0<!o.children(".lahfb-img-placeholder-el").length?o.attr("data-img-placeholder",a).children("a").hide().after("<img class=\"lahfb-img-placeholder-el\" src=\""+this.attributes.url+"\" alt=\"\" />"):o.children(".lahfb-img-placeholder-el").attr("src",this.attributes.url)}):o.removeAttr("data-img-placeholder").children("a").show().end().children(".lahfb-img-placeholder-el").remove()}if(e.hasClass("lahfb-text-placeholder")){let a=e.find(".lahfb-field-input").val();a.trim()?0<!o.find("a").find(".lahfb-text-placeholder-el").length?o.find("a").find(".lahfb-element-name").hide().after("<span class=\"lahfb-text-placeholder-el\">"+a+"</span>"):o.find("a").find(".lahfb-text-placeholder-el").html(a):o.find("a").find("span.lahfb-element-name").show().end().end().find(".lahfb-text-placeholder-el").remove()}}),d()||(v.find(".lahfb-modal-wrap").hide(),v.find(".lahfb-modal-wrap[data-element-target]").remove())}),function(){w.sortable({connectWith:".lahfb-elements-place",placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",start:function(e,l){let t=a(l.item);I=t.closest(".lahfb-tab-panel").attr("id"),D=t.closest(".lahfb-columns").attr("data-columns"),x=t.closest(".lahfb-col").attr("data-align-col")},beforeStop:function(e,t){let n,d=a(t.item),i=d.closest(".lahfb-elements-place"),s=d.data("element"),r=d.data("unique-id").toString(),o=_[I][D][x];for(let a=0;a<o.length;a++)o[a].uniqueId==r&&(n=o.splice(a,1));D=d.closest(".lahfb-columns").attr("data-columns"),x=d.closest(".lahfb-col").attr("data-align-col");let c=i.children(".lahfb-elements-item").map(function(e,l){return d=a(l),{name:d.data("element"),uniqueId:d.data("unique-id").toString(),hidden_element:JSON.parse(d.data("hidden_element")),editor_icon:d.data("editor_icon")}}).get();_[I][D][x]=c,h(),f(),l()}}).disableSelection()}(),o(a(".lahfb-modal-wrap")[0]),a("#lahfb-publish").on("click",function(){if(0==v.children(".lahfb-spinner-wrap").length&&v.prepend("<div class=\"lahfb-spinner-wrap\"><div class=\"lahfb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>"),document.getElementById("LaStudo_Iframe")){let e=document.getElementById("LaStudo_Iframe").contentWindow.jQuery("#lastudio-header-builder");0==e.children(".lahfb-spinner-wrap").length&&e.prepend("<div class=\"lahfb-spinner-wrap\"><div class=\"lahfb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>")}a.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"publish_header",nonce:lahfb_localize.nonce,frontendComponents:JSON.stringify(k)},success:function(){if(v.children(".lahfb-spinner-wrap").remove(),document.getElementById("LaStudo_Iframe")){let e=document.getElementById("LaStudo_Iframe").contentWindow.jQuery("#lastudio-header-builder");e.children(".lahfb-spinner-wrap").remove()}q&&location.reload()}})}),a(".lahfb-action-collapse").on("click",function(){let e=a(this),l=a(".lastudio-backend-header-builder-wrap.lahfb-frontend-builder").css("bottom","-60%"),t=a(".lahfb-actions").css("bottom","0");e.hasClass("lahfb-open")?(l.css("bottom","-60%"),t.css("bottom","0"),e.removeClass("lahfb-open"),e.children("i").attr("class","dashicons dashicons-upload")):(l.css("bottom","0"),t.css("bottom","60%"),e.addClass("lahfb-open"),e.children("i").attr("class","dashicons dashicons-download"))}),a.lahfbGetMultiScripts=function(e,l){let t=a.map(e,function(e){return a.getScript((l||"")+e)});return t.push(a.Deferred(function(e){a(e.resolve)})),a.when.apply(a,t)},a.getStylesheet=function(e){var l=a.Deferred(),t=a("<link/>",{rel:"stylesheet",type:"text/css",href:e}).appendTo("head");return l.resolve(t),l.promise()},a("#lahfb-import").change(function(){var e=event.target.files[0],a=new FileReader;a.onload=c,a.readAsText(e)}),a(document).on("click",".lahfb-prebuild-item",function(e){if(e.preventDefault(),"undefined"==typeof a(this).attr("data-file-name"))window.location.href=a(this).attr("href");else if(confirm("Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?")){let e=a(this).attr("data-file-name"),l=lahfb_localize.prebuilds_url+e;a.ajax({dataType:"json",type:"POST",url:l,success:function(e){b(e)}})}}),a(document).on("click",".lahfb-full-modal .lahfb-prebuild-item i.fa.fa-remove",function(){return event.preventDefault(),confirm("Are you sure you want to delete this preset ?")&&a.ajax({type:"POST",url:lahfb_localize.ajaxurl,data:{action:"lahfb_ajax_action",router:"delete_header_preset_template",nonce:lahfb_localize.nonce,header_key:a(this).parent().data("saved-name")},dataType:"json",success:function(l){if(l.success){let t="";for(let a in l.data){let n=l.data[a],d=e(window.location.href,"prebuild_header",a);t+="undefined"==typeof n.image?"<a class=\"lahfb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><span>"+n.name+"</span><i class=\"fa fa-remove\"></i></a>":"<a class=\"lahfb-prebuild-item\" data-saved-name=\""+a+"\" href=\""+d+"\"><img src=\""+n.image+"\" alt=\""+n.name+"\"/><i class=\"fa fa-remove\"></i></a>"}a(".lahfb-predefined-modal-inner-content").html(t),alert("Deleted successfully!")}else alert("Sorry, please try again!")}}),!1}),"vertical"==_["desktop-view"].row1.settings.header_type){let e=v.find(".lahfb-tabs-panels"),l=e.find("#desktop-view").children(".lahfb-columns[data-columns=\"row1\"]").children(".lahfb-elements-item"),t=a("#lahfb-vertical-header");l.attr("data-element","vertical-area"),t.find("span").text("Horizontal Header"),e.addClass("lahfb-vertical-header-panel"),g.sortable({axis:"y"})}v.on("click","#lahfb-vertical-header",function(e){e.preventDefault();let t=a(this),n=a(".lahfb-tabs-list"),d=v.find(".lahfb-tabs-panels"),i=d.find("#desktop-view").children(".lahfb-columns[data-columns=\"row1\"]").children(".lahfb-elements-item"),s=_["desktop-view"].row1.settings,r=s.header_type;"horizontal"==r?(s.element="vertical-area",i.attr("data-element","vertical-area"),s.header_type="vertical",t.find("span").text(lahfb_localize.i18n.horizontal_header_text),d.addClass("lahfb-vertical-header-panel"),g.sortable({axis:"y"})):(s.element="header-area",i.attr("data-element","header-area"),s.header_type="horizontal",t.find("span").text(lahfb_localize.i18n.vertical_header_text),d.removeClass("lahfb-vertical-header-panel"),g.sortable({axis:""}),a("#wrap").removeClass("lahfb-header-vertical-toggle")),k["desktop-view"].row1.settings.element=_["desktop-view"].row1.settings.element,k["desktop-view"].row1.settings.header_type=_["desktop-view"].row1.settings.header_type,h(),f(),l(),n.find("li").removeClass("w-active"),n.find("li:first-child").addClass("w-active"),a(".lahfb-tab-panel").hide(),a("#desktop-view").show()})})})}(jQuery);